<div class="modal is-active" id="timeline-modal">
<div class="modal-background to-profile"></div>
<div class="modal-card noselect">
  <header class="modal-card-head">
      <a class="close button is-info is-inverted to-profile" aria-label="close">
        <span class="icon">
          <i class="fa fa-times"></i>
        </span>
      </a>
      <p class="modal-card-title" id="header">Timeline of {{erc360.name}}</p>
      <p class="control">
        <button class="button is-info is-normal is-rounded" id="reload-timeline">
          <span class="icon is-small">
            <i class="fa fa-refresh"></i>
          </span>
        </button>
    </p>
  </header>
  <section id="timeline-content" class="modal-card-body has-text-centered">
  <table class="table is-striped is-bordered is-fullwidth">
  {% for e in erc360.events[::-1] %}
  <tr><td>
  {% set payload = e.payload %}
    {% if payload["methodId"] == '0x60806040' %} <!-- on creation -->
    <span class='icon'><i class='fa-solid fa-star'></i></span>
      <span class='text'>Created</span>
      <p>Time: {{payload["blockNumber"]}}</p>
    {% elif payload["methodId"] == '0x' %} <!-- on simple receipt -->
    <span class='icon'><i class="fa-solid fa-money-bill-transfer"></i></span>
      <span class='text'>Receipt</span>
      <p>Amount: {{payload["value"]}}</p>
    {% elif payload["methodId"] == "sP" %}
      <span class='icon'><i class='fa-solid fa-user-tie'></i></span>
      <span class='text'>Permit Set</span>
      <p>permit: {{payload["permit"]}}</p>
      <p>affected: {{payload["account"]}}</p>
      <p>new state: {{payload["newState"]}}</p>
    {% elif payload["methodId"] == "sB" %}
      <span class='icon'><i class='fa-solid fa-user-tie'></i></span>
      <span class='text'>Base Permit Set</span>
      <p>permit: {{payload["permitName"]}}</p>
      <p>new state: {{payload["newState"]}}</p>
    {% elif payload["methodId"] == "iD" %}
      <span class='icon'><i class='fa-solid fa-money-check-dollar'></i></span>
      <span class='text'>Dividend Issued</span>
      <p>from: {{payload["bankName"]}}</p>
      <p>token address: {{payload["tokenAddress"]}}</p>
      <p>value: {{payload["value"]}}</p>
    {% elif payload["methodId"] == "dD" %}
      <span class='icon'><i class='fa-solid fa-coins'></i></span>
      <span class='text'>Dividend Dissolved</span>
      <p>dividend id: {{payload["dividend"]}}</p>
      <p>value dissolved: {{payload["dividendValue"]}}</p>
    {% elif payload["methodId"] == "cD" %}
      <span class='icon'><i class='fa-solid fa-cake-slice'></i></span>
      <span class='text'>Dividend Claimed</span>
      <p>dividend id: {{payload["dividend"]}}</p>
      <p>claimed value: {{payload["dividendValue"]}}</p>
    {% elif payload["methodId"] == "tT" %}
    <span class='icon'><i class='fa-solid fa-money-bill-transfer'></i></span>
    <span class='text'>Token Transferred</span>
    <p>bank: {{payload["bankName"]}}</p>
    <p>token address: {{payload["tokenAddress"]}}</p>
    <p>value: {{payload["value"]}}</p>
    <p>to: {{payload["to"]}}</p>
  {% elif payload["methodId"] == "mT" %}
    <span class='icon'><i class='fa-solid fa-building-columns'></i></span>
    <span class='text'>Token Moved</span>
    <p>from: {{payload["fromBankName"]}}</p>
    <p>to: {{payload["toBankName"]}}</p>
    <p>token address: {{payload["tokenAddress"]}}</p>
    <p>value: {{payload["value"]}}</p>
  {% endif %}
</td></tr>
{% endfor %}
</table>
</section>
</div>
</div>